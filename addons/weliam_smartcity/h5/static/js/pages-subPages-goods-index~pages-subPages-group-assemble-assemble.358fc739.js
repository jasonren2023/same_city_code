(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-subPages-goods-index~pages-subPages-group-assemble-assemble"],{"1f5d":function(n,t,e){"use strict";var i;e.d(t,"b",(function(){return s})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return i}));var s=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",[e("popup-view",{attrs:{show:n.showBuyMenu,type:"bottom"},on:{clickmask:function(t){arguments[0]=t=n.$handleEvent(t),n.onToggleTrade.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"goods-buy-menu",style:{height:n.buyMeunHeight}},[e("v-uni-view",{staticClass:"iconfont icon-roundclose",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.onToggleTrade.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"trade-main"},[e("v-uni-view",{staticClass:"buy-info dis-flex flex-y-center"},[e("v-uni-view",{staticClass:"buy-images"},[e("v-uni-image",{attrs:{src:n.image_path}})],1),e("v-uni-view",{staticClass:"buy-content"},[e("v-uni-view",{staticClass:"buy-money price-font-family dis-flex flex-y-line"},[e("v-uni-text",{staticClass:"money-label"},[n._v("¥")]),n._v(n._s("1"==n.groupBuyType?n.share_price:n.goods_price)),"1"===n.goodsDetail.vipstatus&&0!=n.sku_coupon_price?e("v-uni-view",{staticClass:"dis-flex flex-y-center member-coupon-view"},[1==n.goodsDetail.levelarmy?e("v-uni-view",{staticClass:"member-price-label f-22"},[n._v("拥军价格")]):e("v-uni-view",{staticClass:"member-price-label f-22"},[n._v(n._s(n.goodsDetail.levelname))]),e("v-uni-view",{staticClass:"f-22 col-f onelist-hidden b-0 coupon-price-2"},[n._v("立减"),e("v-uni-text",{staticClass:"member-coupon-price"},[n._v(n._s(n.sku_coupon_price))]),n._v("元")],1)],1):n._e()],1),e("v-uni-view",{staticClass:"buy-stock"},[n._v("库存"+n._s(n.stock_num)+"件")]),n.specData&&n.specData.length>0?e("v-uni-view",{staticClass:"buy-spec"},[n._v("选择 "+n._s(n.selectSpec))]):n._e()],1)],1),e("v-uni-scroll-view",{staticClass:"buy-spec-list",style:{height:"calc("+n.buyMeunHeight+" - 370rpx)"},attrs:{"scroll-y":!0}},[n.specData&&n.specData.length>0?[n._l(n.specData,(function(t,i){return[e("v-uni-view",{key:i+"_0",staticClass:"buy-spec-item"},[e("v-uni-view",{staticClass:"spec-item-title"},[n._v(n._s(t.title))]),t.item.length>0?e("v-uni-view",{staticClass:"spec-items dis-flex flex-dir-row"},[n._l(t.item,(function(t,s){return[e("v-uni-view",{key:s+"_0",staticClass:"spec-item",class:{active:t.checked,disabled:t.disabled},attrs:{"data-attr-idx":i,"data-item-idx":s,"data-item-check":t.checked,"data-item-disabled":t.disabled},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.modelTap.apply(void 0,arguments)}}},[n._v(n._s(t.title))])]}))],2):n._e()],1)]}))]:n._e(),e("v-uni-view",{staticClass:"buy-number dis-flex flex-y-center flex-x-between",staticStyle:{"padding-bottom":"50upx"}},[e("v-uni-view",{staticClass:"buyNumber f-28"},[e("v-uni-text",[n._v("购买数量")])],1),e("v-uni-view",{staticClass:"selectNumber dis-flex flex-y-center"},[e("v-uni-button",{staticClass:"default",class:[n.goods_num>1?"":" default-active"],attrs:{type:"default"},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.down.apply(void 0,arguments)}}},[n._v("-")]),n.showBuyMenu?e("v-uni-input",{attrs:{type:"number"},model:{value:n.goods_num,callback:function(t){n.goods_num=t},expression:"goods_num"}}):n._e(),e("v-uni-button",{staticClass:"default",class:{"default-active":n.goods_num>=n.stock_num||n.buy_limit>0&&n.goods_num>=n.user_limit_num},attrs:{disabled:Number(n.goods_num)>Number(n.stock_num),type:"default"},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.up.apply(void 0,arguments)}}},[n._v("+")])],1)],1)],2),e("v-uni-view",{staticClass:"buy-button-box dis-flex flex-y-center"},[n.isSelectSpec?["3"===n.goodsDetail["type"]&&"2"===n.groupBuyType?[e("v-uni-button",{staticClass:"buy-button join-btn",class:{"notAva-btn":0==n.stock_num},attrs:{disabled:0==n.stock_num||n.isMaxBuyLimit},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.btnClick("confirm")}}},[n._v(n._s(0==n.stock_num?"暂无库存":"去参团"))])]:[e("v-uni-button",{staticClass:"buy-button",class:{"notAva-btn":0==n.stock_num},attrs:{disabled:0==n.stock_num},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.btnClick("confirm")}}},[n._v(n._s(0==n.stock_num?"暂无库存":"确定"))])]]:[e("v-uni-button",{staticClass:"buy-button",attrs:{disabled:!0}},[n._v("请选择商品规格")])]],2)],1)],1)],1)],1)},o=[]},2909:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=u(e("6005")),s=u(e("db90")),o=u(e("06c5")),a=u(e("3427"));function u(n){return n&&n.__esModule?n:{default:n}}function c(n){return(0,i.default)(n)||(0,s.default)(n)||(0,o.default)(n)||(0,a.default)()}},3427:function(n,t,e){"use strict";function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},"4aa2":function(n,t,e){"use strict";var i=e("7664"),s=e.n(i);s.a},"56d8":function(n,t,e){var i=e("24fb");t=i(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 购买菜单 */.goods-buy-menu[data-v-465a855c]{width:100vw;height:67vh;background:#fff;border-radius:%?12?% %?12?% 0 0;position:relative;z-index:999}.goods-buy-menu .icon-roundclose[data-v-465a855c]{position:absolute;top:%?20?%;right:%?20?%;font-size:%?42?%;height:1em;width:1em;color:#999}.trade-main[data-v-465a855c]{padding:%?20?% %?20?% %?50?%;box-sizing:border-box}.buy-info .buy-images uni-image[data-v-465a855c]{width:%?180?%;height:%?180?%;display:block;border-radius:%?12?%}.buy-content[data-v-465a855c]{margin-left:%?30?%;font-size:%?24?%}.buy-money[data-v-465a855c]{font-size:%?40?%;color:#fe504f}.buy-money uni-text[data-v-465a855c]{font-size:%?24?%}.buy-stock[data-v-465a855c]{margin-top:%?20?%;color:#999}.buy-spec[data-v-465a855c]{margin-top:%?24?%}.buy-spec-list[data-v-465a855c]{margin-top:%?30?%;height:calc(65vh - %?336?%)}.buy-spec-item[data-v-465a855c]{padding-bottom:%?30?%}.spec-item-title[data-v-465a855c]{font-size:%?28?%;line-height:2em;margin-top:%?12?%}.spec-items[data-v-465a855c]{flex-wrap:wrap}.spec-items .spec-item[data-v-465a855c]{font-size:%?26?%;white-space:nowrap;background:#f5f5f5;padding:%?12?% %?20?%;border-radius:%?12?%;color:#333;margin:%?20?% %?20?% 0 0;border:%?1?% solid transparent}.spec-items .spec-item.active[data-v-465a855c]{background:#fffbfb;color:#fe504f;border:%?1?% solid #f44}.spec-items .spec-item.disabled[data-v-465a855c]{background:#f5f5f5;color:#d0d0d0}.buy-number[data-v-465a855c]{margin:%?20?% 0}.buy-button-box[data-v-465a855c]{position:absolute;left:0;right:0;bottom:0;height:%?140?%;background:#fff}.buy-button-box .buy-button[data-v-465a855c]{color:#fff;border-radius:%?50?%;width:90%;margin:%?16?% 5% 0;background:#fe504f;font-size:%?28?%;line-height:2.8em}.buy-button-box .buy-button.join-btn[data-v-465a855c]{background:#ffd940;color:#333}.buy-button-box .buy-button.notAva-btn[data-v-465a855c]{background-color:#eee!important;color:#999!important}.member-price-label[data-v-465a855c]{color:#333;height:0;line-height:%?30?%;border-width:%?0?% %?10?% %?30?% 0;border-style:none solid solid;border-color:transparent #000 #efd68f;position:relative;left:%?10?%;padding-left:%?6?%;border-radius:%?4?% 0 0 %?4?%;margin-left:%?-10?%}.member-coupon-price[data-v-465a855c]{color:#efd68f}.coupon-price-2[data-v-465a855c]{padding:0 %?10?%;height:%?30?%;line-height:%?30?%;border-radius:0 %?4?% %?4?% 0}.member-coupon-view[data-v-465a855c]{position:relative;margin-left:%?12?%;top:%?-6?%}.selectNumber uni-input[data-v-465a855c]{text-align:center;width:%?100?%}",""]),n.exports=t},6005:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=s(e("6b75"));function s(n){return n&&n.__esModule?n:{default:n}}function o(n){if(Array.isArray(n))return(0,i.default)(n)}},"642a":function(n,t,e){"use strict";e.r(t);var i=e("cec8"),s=e.n(i);for(var o in i)"default"!==o&&function(n){e.d(t,n,(function(){return i[n]}))}(o);t["default"]=s.a},7664:function(n,t,e){var i=e("56d8");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var s=e("4f06").default;s("6183995a",i,!0,{sourceMap:!1,shadowMode:!1})},afb6:function(n,t,e){"use strict";e.r(t);var i=e("1f5d"),s=e("642a");for(var o in s)"default"!==o&&function(n){e.d(t,n,(function(){return s[n]}))}(o);e("4aa2");var a,u=e("f0c5"),c=Object(u["a"])(s["default"],i["b"],i["c"],!1,null,"465a855c",null,!1,i["a"],a);t["default"]=c.exports},cec8:function(n,t,e){"use strict";var i=e("4ea4");e("99af"),e("4de4"),e("7db0"),e("caad"),e("d81d"),e("a434"),e("a9e3"),e("2532"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(e("2909")),o=i(e("77ab")),a=i(e("a833")),u={data:function(){return{showBuyMenu:!1,goods_price:0,goods_num:1,stock_num:0,buy_limit:0,user_limit_num:0,goods_sku_id:"",goods_spec_arr:[],sku_coupon_price:0,share_price:0,specData:[],image_path:null,skuItem:null,activityData:null,lp_now_stk:0,TextSubstitution:{}}},props:{goodsSpec:{type:Array,default:function(){return null}},goodsDetail:{type:Object,default:function(){return null}},specDisabled:{type:Boolean,default:!1},groupBuyType:{type:String,default:""}},watch:{goodsSpec:function(n){var t;n&&n.length>0&&(t=this.specData).splice.apply(t,[0,n.length].concat((0,s.default)(n)))},goodsDetail:function(n,t){n&&(this.initBuyMeunData(n),console.log("监听"))},groupBuyType:function(n){n&&this.updateSpecGoods()}},components:{PopupView:a.default},computed:{selectSpec:function(){var n=this.specData,t=[];return n&&n.length>0&&n.map((function(n){n.item.map((function(n){n.checked&&t.push(n.title)}))})),t.join(" · ")},isSelectSpec:function(){if(this.goodsDetail)return!Number(this.goodsDetail.optionstatus>0)||this.goods_spec_arr.filter((function(n){return!!n})).length===this.specData.length},buyMeunHeight:function(){if(this.goodsDetail&&this.specData["list"])return Number(this.goodsDetail.optionstatus)>0?this.specData&&this.specData["list"]["length"]>1?"67vh":"50vh":"40vh"},hasGroups:function(){return this.goodsActivity&&this.goodsActivity.group_id},groupsType:function(){return"3"===this.goodsDetail.type&&"2"===this.groupBuyType},isShowJoinGroups:function(){return this.activityData&&1===this.activityData.is_show_groups&&this.activityData.groupsNumber>0},isMaxBuyLimit:function(){if(this.activityData){var n=this.limit_buy,t=this.surplus_quantity,e=this.activityData.buyNumber;if("string"===typeof e)return 10===n&&this.goods_num+Number(e)>=t}}},mounted:function(){this.TextSubstitution=uni.getStorageSync("TextSubstitution"),this.goodsDetail.spec&&this.goodsDetail.spec.info[0]&&(console.log(this.goodsDetail),this.goodsDetail.spec.info[0].thumb?this.image_path=this.goodsDetail.spec.info[0].thumb:this.image_path=this.goodsDetail.logo,console.log(this.goodsDetail.spec.info[0].thumb,111111111111))},methods:{initBuyMeunData:function(n,t){var e=this,i={};if(i.goods_sku_id=n["spec"]?n["spec"]["info"][0]["id"]:"",i.goods_price=0==e.goods_price?n["spec"]?(!e.groupsType&&n.is_vip>0&&n.vipstatus,n["spec"]["info"][0]["price"]):n["price"]:e.goods_price,i.sku_coupon_price=n["spec"]?n["spec"]["info"][0]["discount_price"]:n["discount_price"],i.share_price=n["spec"]?n["spec"]["info"][0].aloneprice:n["aloneprice"],i.stock_num=n.stk||n.user_limit_num,console.log(i.goods_price),i.buy_limit=Number(n.buy_limit),i.user_limit_num=n.user_limit_num,i.image_path="5"===n.type?n.logo:n.thumbs[0],i.lp_now_stk=n["lp_now_stk"],Number(n.optionstatus)>0&&n["spec"]["list"][0]["item"]["thumb"]&&(i.image_path=n["spec"]["list"][0]["item"]["thumb"]),Number(n.optionstatus)>0){var s=e.initManySpecData(this.specData,t),o=s.map((function(n){var t="";return n.item.map((function(n){n.checked&&(t=n.id)})),t}));if(o.length>0){var a=n.spec.info.filter((function(n){return n.specs===o.join("_")}));i.stock_num=a.length>0?a[0].stock:n.stk}i.specData=s}this.setData(i),this.goodsDetail.spec&&this.goodsDetail.spec.info[0].thumb?this.image_path=this.goodsDetail.spec.info[0].thumb:this.image_path=this.goodsDetail.logo},initManySpecData:function(n,t){if(1!==t)return console.log(this.goods_spec_arr),n;for(var e in console.log(n,"guige1规格测试试试",t),n)for(var i=0;i<n[e].item.length;i++){if(console.log(n[e].item[i]),n[e].item[i].checked)return console.log(n[e].item[i],11111),n;i<1&&(n[e].item[0].checked=!0,this.goods_spec_arr.splice(e,1,n[e].item[0].id))}return n},modelTap:function(n){var t=this,e=Number(n.currentTarget.dataset.attrIdx),i=Number(n.currentTarget.dataset.itemIdx),s=n.currentTarget.dataset.itemDisabled,o=n.currentTarget.dataset.itemCheck,a=null;t.specDisabled&&s||(a=t.specData[e].item.map((function(n,a){if(t.specDisabled?s||(o?t.$set(n,"checked",!1):n.checked=i===a,i===a&&t.goods_spec_arr.splice(e,1,n.signid)):t.$set(n,"checked",i===a),n.checked){var u=n.thumb;u&&t.setData({image_path:u})}return i===a&&(t.goods_spec_arr.splice(e,1,n.checked?n.id:null),t.specDisabled&&t.filterDisabledSpec(n,e)),n})),t.$set(t.specData[e],"item",a),t.updateSpecGoods())},filterDisabledSpec:function(n,t){var e=this,i=e.goodsDetail.sku,s=e.specData,o=s.length,a=[];if(Array.isArray(s)&&Array.isArray(i)){if(i.map((function(t){var e=t.is_use,i=(t.title,t.spec_sku_id),s=void 0===i?"":i;1!==o||e?!e&&s.includes(n.signid)&&a.push(s):a.push(s)})),1===o)return;s.map((function(n,i){var s=n.spec_item_list;i!==t&&s.map((function(n){var t=e.goods_spec_arr.map((function(n){return n}));t[i]=n.signid,t=t.filter((function(n){return!!n})).join("_"),n.disabled=a.includes(t)}))}))}},updateSpecGoods:function(n){var t=this.goods_spec_arr.join("_"),e=this.goodsDetail.spec?this.goodsDetail.spec.info:[],i=this.goodsDetail,s=(i.is_vip,i.discount_price,i.vipstatus,i.type),o=null;if(o=e.find((function(n){return n.specs==t})),"object"===typeof o)console.log(o,"是是是",e),this.skuItem=o,this.setData({goods_sku_id:o.id,goods_price:(this.groupBuyType,o.price),stock_num:o.stock,goods_num:1==n?this.goods_num:1,sku_coupon_price:o.discount_price,share_price:o.aloneprice,image_path:o.thumb||this.goodsDetail.logo});else if(void 0===o||""===o){this.skuItem?this.skuItem:e[0];console.log("是是是",e,this.goodsDetail),"3"===s?(this.goods_price="2"===this.groupBuyType?this.goodsDetail["price"]:this.goodsDetail["aloneprice"],this.stock_num=this.stock_num):(this.goods_price=e[0].price,this.stock_num=e[0].stock)}},up:function(){var n=this.stock_num,t=this.buy_limit,e=this.user_limit_num;this.goods_num=Number(this.goods_num),t>0&&this.goods_num>=e||0==t&&this.goods_num>=e&&0!=e?uni.showToast({icon:"none",title:0===e?"购买数量已达上限":"您最多可购买".concat(e,"件商品")}):(this.goods_num<n||this.goods_num<e)&&++this.goods_num},down:function(){this.goods_num>1&&--this.goods_num},btnClick:function(n){console.log(this.specData),this.specData.length>0&&(console.log(1111),this.updateSpecGoods(1));var t=this.goods_num,e=this.goods_sku_id,i="3"===this.goodsDetail.type&&"2"===this.groupBuyType?"1":"2",s={btnType:n,goods_num:t,goods_sku_id:e};return"3"===this.goodsDetail.type&&Object.assign(s,{buystatus:i}),this.goods_num>this.stock_num?(uni.showToast({title:"购买数量不能超过库存",icon:"none"}),void(this.goods_num=this.stock_num)):this.goods_num<1?(uni.showToast({title:"购买数量不能为0",icon:"none"}),void(this.goods_num=1)):this.goods_num>this.user_limit_num&&0!=this.user_limit_num?(uni.showToast({title:"您最多可购买".concat(this.user_limit_num,"件商品"),icon:"none"}),void(this.goods_num=this.user_limit_num)):void("1"===this.goodsDetail.type&&this.lp_now_stk>0&&t>this.lp_now_stk?o.default.showError("抢购数量已达上限"):(this.showBuyMenu=!1,this.activeBuyMeuns(!1),this.$emit("submit",s)))},activeBuyMeuns:function(n){var t=this,e=(t.groupBuyType,t.specData);n&&this.updateSpecGoods(),Array.isArray(e)&&e.length>0&&(e=e.map((function(e,i){return e.item=e.item.map((function(e,s){return n||t.$set(e,"checked",!1),t.goods_spec_arr.splice(i,1,""),e})),e})),this.specData=e)},onToggleTrade:function(){this.showBuyMenu=!this.showBuyMenu}}};t.default=u},db90:function(n,t,e){"use strict";function i(n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}e("a4d3"),e("e01a"),e("d28b"),e("a630"),e("d3b7"),e("3ca3"),e("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}}]);